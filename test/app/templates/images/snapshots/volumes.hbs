{{#if filteredSnapshots}}
  {{#if currentPageVisible}}
    <span class="pagination-legend">{{currentPageVisible}}</span>
  {{/if}}
  <table class="volumes-snapshot-table">
    <thead>
      <tr>
        {{table-header action="sort" isLoading=sorting sortDir=sort_direction col="name" text="Name"}}
        {{table-header action="sort" isLoading=sorting sortCol=sort sortDir=sort_direction col="size" text="Size"}}
        {{table-header action="sort" isLoading=sorting sortCol=sort sortDir=sort_direction col="region" text="Region"}}
        {{table-header action="sort" isLoading=sorting sortCol=sort sortDir=sort_direction col="created_at" text="Created"}}
        {{#unless isReadOnly}}
          {{table-header col="action" noSorting=true}}
        {{/unless}}
      </tr>
    </thead>
    <tbody>
      {{#each filteredSnapshots as |snapshot|}}
        <tr class="{{if snapshot.highlightNew "highlight-new"}}">
          <td>
            {{#ellipsis-text text=snapshot.name}}
              {{resource-item item=snapshot}}
            {{/ellipsis-text}}
          </td>
          <td>
            {{#if snapshot.sizeBytesCalculated}}
              {{bytes-to-human-size gb=snapshot.utilizedSizeGigabytes}}
            {{else}}
              Calculating...
            {{/if}}
          </td>
          <td class="images__regionColumn">
            {{region-slug slug=snapshot.region}}
          </td>
          <td class="images__createdColumn">
            {{date-to-human-time date=snapshot.createdAt}}
          </td>
          {{#unless isReadOnly}}
            <td class="images__actionColumn">
              <div class="u-floatRight">
                {{#if (and (not snapshot.failedDelete) snapshot.isDeleted)}}
                  {{loading-spinner message="Deleting"}}
                {{else if snapshot.isInitializing}}
                  {{loading-spinner message="Saving"}}
                {{else}}
                  {{volume-snapshots-dropdown-menu
                    title="More"
                    items=menuItems
                    action="menuItemClick"
                    deleteSnapshot="deleteSnapshot"
                    actionParams=snapshot
                    closeOnClick=true
                  }}
                {{/if}}
              </div>
            </td>
          {{/unless}}
        </tr>
      {{/each}}
    </tbody>
  </table>
  {{#if needsPagination}}
    {{paginator-full
      linkToPage='images.snapshots.volumes'
      isLoading=paginating
      pages=snapshots.meta.pagination.pages
      currentPage=snapshots.meta.pagination.current_page
      action="changePage"
    }}
  {{/if}}
  {{#if showAttachModal}}
    {{partial "partials/volume-modal"}}
  {{/if}}
{{else}}
  <div class="EmptyState image-empty u-mt-4 u-mb-4">
    <img class="EmptyState-image" src="/assets/images/empty-snapshots-volumes.svg" alt="Empty snapshots">
    <h3>Looks like you don’t have any volume snapshots.</h3>
    {{#if snapshotsCtrl.volumeCount}}
      <p>Snapshots allow you to manually copy and store an image of your volume. Take one using the form up top or from the “More” dropdown menu on any volume.</p>
    {{else}}
      <p>Snapshots allow you to manually copy and store an image of your volume. Snapshots are created from volumes, so you'll need to create one of those first.</p>
      {{#unless isReadOnly}}
        {{#link-to 'droplets.volumes' class="Button Button--blue"}}Create Volume{{/link-to}}
      {{/unless}}
    {{/if}}
  </div>
{{/if}}
