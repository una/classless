{{#modal-window
  onHide="onModalHide"
  showCancel=false
  showSave=false
  title=modalTitle
  contentClasses="u-pl-2 u-pr-2"
  disableFirstInputFocus=true
  class="monitor-add-edit"
  size="xlarge"
  save=isSaving
}}

  <div class="row">
    <div class="small-6 columns u-pl-0">
      <h4>Droplet</h4>
      {{auto-complete
        items=autoCompleteItems
        disabledItemIndicies=dropletsDisabledModelIndices
        isSearching=autoCompleteIsSearching
        isShowingMore=autoCompleteIsShowingMore
        onSelect="onSelectDroplet"
        onShow="onUnselectDroplet"
        searchValue=dropletSearchValue
        showClose=false
        placeholder="Choose Droplet"
        selectedItem=selectedDroplet
      }}

      <h4 class="u-mt-5">Alert policy Info</h4>
      {{auto-complete
        items=metricAutoCompleteItems
        placeholder="Choose a metric"
        onSelect="onSelectMetric"
        onShow="onUnselectMetric"
        isStatic=true
        onInput="autocompleteSearchMetrics"
        selectedItem=selectedMetric
      }}

      <div class="row u-mt-3 u-mr-0 u-ml-0">

        <div class="small-3 columns u-pl-0 u-pr-0">
          <div class="Select">
            <select class="select" onchange={{action "selectCondition" value="target.value"}}>
              {{#each enumsService.conditions as |condition|}}
                <option
                  value={{condition.machineName}}
                  selected={{eq condition.machineName conditionChoice}}
                >{{condition.name}}</option>
              {{/each}}
            </select>
          </div>
        </div>

        <div class="small-5 columns u-pr-0">
          {{input
            type="number"
            placeholder="Threshold"
            value=thresholdValue
            class="has-suffix"
            min=0
            max=thresholdMax
            input=(action "trackThresholdUserInput")
            step="any"}}
          <span>{{selectedMetric.unit}}</span>
        </div>

        <div class="small-1 columns u-textAlignCenter u-pr-0 u-pl-0 u-verticalAlignWithInput">for</div>

        <div class="small-3 columns u-pr-0 u-pl-0">
          <div class="Select">
            <select class="select" onchange={{action "selectDuration" value="target.value"}}>
              {{#each enumsService.durations as |duration|}}
                <option
                  value={{duration.id}}
                  selected={{eq duration.id durationChoice.id}}
                >{{duration.humanReadableName}}</option>
              {{/each}}
            </select>
          </div>
        </div>

        <div class="small-12 columns u-pa-0">
          {{float-label-input
            required=true
            value=description
            placeholder="Monitor name"
            error=monitorNameErrorMsg
            class="is-required"
            customValidationRule=validateMonitorName
            onInput="updateMonitorDescription"
          }}
        </div>
      </div>
    </div>

    <div class="small-6 columns u-pl-4 u-pr-0">
      <h4>{{chartHeader}}</h4>
      <div class="Box Chart-d3 Threshold-chart">
        {{threshold-chart
          data=dropletChartData
          palette=colorPalette
          yLine=thresholdValue
          condition=conditionChoice
          range=monthOfSeconds
        }}
      </div>
    </div>
  </div>

  <div class="row u-mt-3">
      <h4 class="u-mt-2">Alerts</h4>
  </div>
  <div class="row u-mb-3">
    <div class="small-6 columns u-pl-0 monitoring-alert-container">
        <div class="checkbox u-mr-0">
          {{input id="email-checkbox" type="checkbox" checked=email.checked disabled=email.emailBoxDisabled}}
          <span></span>
          <label for="email-checkbox">
              Email to {{email.address}}
          </label>
        </div>
    </div>
  </div>
  <div class="row u-mb-3 u-mt-3">
    <div class="small-5 columns u-pl-0 monitoring-alert-container">
      {{#if (and slack.value (not slack.editingValue ) )}}
        <div class="checkbox u-mr-0">
          {{input id="slack-checkbox" type="checkbox" checked=slack.checked disabled=slack.checkBoxDisabled}}
          <span></span>
          <label for="slack-checkbox">
            {{#if (and slack.value (not slack.editingValue ) )}}
              Slack to {{slack.channel}}
            {{/if}}
          </label>
        </div>
      {{/if}}

      {{#if (and slack.value (not slack.editingValue ) )}}
        <a role="button" class="u-ml-2" {{action 'deleteSlack' }}>Unlink</a>
      {{/if}}

      {{#if (or slack.editingValue (not slack.value)) }}
        <button class="Button" {{action 'authenticateSlack' }}>
          <span class="Icon--slack u-mr-1"></span>
          Connect Slack
        </button>
      {{/if}}

    </div>

    <div class="small-7 columns u-pr-0">
      {{#if model.threshold}}
        <button
          {{action 'updateMonitor'}}
          class="Button Button--blue u-floatRight"
          disabled={{not canCreate}}
          data-dismiss="modal"
        >
          Save alert policy
        </button>
      {{else}}
        <button
          {{action 'createMonitor'}}
          class="Button Button--blue u-floatRight"
          disabled={{not canCreate}}
          data-dismiss="modal"
        >
          Create alert policy
        </button>
      {{/if}}
      <button class="Button u-floatRight u-mr-2" data-dismiss="modal">Cancel</button>
      {{#if (not hasAtLeastOneAlert) }}
        <div class="u-floatRight alert-error-message u-verticalAlignWithInput u-mr-3">Please select one alert type.</div>
      {{/if}}
    </div>

  </div>

{{/modal-window}}
